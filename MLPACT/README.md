# PACT Simulation and ML Integration

This folder contains all the necessary files to run MLPACT.
This project integrates a PACT simulation with a machine learning (ML) model that uses linear regression to predict temperature from power input data. The workflow includes:
- Parsing PACT simulation output files.
- Creating overlapping windows from 2D data arrays.
- Training an online ML model and predicting temperature.
- Calculating error metrics to assess convergence.

<p align="center">
<img src= "/image/MLPACT.png" />
</p>

### Features
- **Data Parsing:** Reads and processes both PACT simulation files and CSV data.
- **Window Generation:** Creates overlapping windows from 2D matrices.
- **Online Training:** Incrementally trains a linear regression model using new data.
- **Error Metrics:** Computes MAE, MSE, and maximum error to evaluate predictions.
- **Modularity:** Easily configurable parameters (e.g., window size, stride, accuracy threshold).
### Requirements
- Python 3.6+
- [pandas]
- [numpy]
- [scikit-learn]
- [scipy]

Install the required Python packages using pip:
```bash
pip install pandas numpy scikit-learn scipy
```
**Note: This project has not yet been integrated into PACT's workflow and is provided for reference only. It may require modifications based on your specific use case.**
## How to Run the Code

### Prepare Your Data
* Place your ptrace folders (containing files like scaled_*.csv) in the directory specified by the --ptraces_dir argument (default is different_ptraces).
* Ensure that your ML dataset directory (default is ML_Dataset) contains the necessary files such as the CSV files generated by the PACT simulation.
* Adjust the external simulation command (inside MLPACT_Demo_Winow.py or MLPACT_Demp_Standard.py) if needed to match your local environment.

### Run the Simulation
From the root of the repository, run the main script with the desired arguments. If you want to use the window-based linear regression use MLPACT_Demo_Window.py. For example:
```bash
python MLPACT_Demo_window.py --ptraces_dir path/to/your/ptraces --ml_dataset_dir path/to/your/ML_Dataset --max_iterations 50
```
* --ptraces_dir: Directory containing the ptrace folders.
* --ml_dataset_dir: Directory for the ML dataset (where intermediate files will be written/read).
* --max_iterations: Maximum number of samples that you want to run

## Code Customization
### Model and Training Parameters:
You can modify the following global variables in the python file to suit your needs:
* DEFAULT_MATRIX_SHAPE (default is (128, 128)) (Based on your simulation resolution (Grid Size))
* DEFAULT_WINDOW_SIZE (default is 32)
* DEFAULT_STRIDE (default is 4)
* ACCURACY_THRESHOLD (default is 1.5)

**Note: The PACT simulation is invoked via an os.system command within the code. Adjust this command if your environment differs.**

